<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras</title>
    <!-- Importa el nuevo archivo base de estilos (incluye Font Awesome y dark mode) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/carrito.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>üõí Tu Carrito de Compras</h1>
            <!-- Bot√≥n de Claro/Oscuro -->
            <button id="theme-toggle" aria-label="Cambiar tema">
                <i class="fas fa-sun"></i>
                <i class="fas fa-moon"></i>
            </button>
        </header>

        <div class="acciones-top">
            <a href="/" class="btn-accion">Seguir Comprando</a>
            {% if carrito %}
                <a href="/vaciar" class="btn-accion btn-vaciar">Vaciar Carrito</a>
            {% endif %}
        </div>

        <div class="carrito-container">
            {% if carrito %}
                <ul class="carrito-items">
                    {% for item in carrito %}
                        <li class="carrito-item">
                            <img src="{{ item.imagen }}" alt="{{ item.nombre }}" class="item-img">
                            <span class="item-nombre">{{ item.nombre }}</span>
                            <div class="cantidad-container">
                                <a href="/cambiar_cantidad/{{ item.id }}/{{ item.cantidad - 1 }}" class="btn-cantidad">-</a>
                                <span class="cantidad-actual">{{ item.cantidad }}</span>
                                <a href="/cambiar_cantidad/{{ item.id }}/{{ item.cantidad + 1 }}" class="btn-cantidad">+</a>
                            </div>
                            <span class="item-precio-total">${{ "%.2f"|format(item.precio * item.cantidad) }}</span>
                        </li>
                    {% endfor %}
                </ul>

                <div class="carrito-total">
                    Total: <span>${{ "%.2f"|format(total) }}</span>
                </div>

                <button id="btn-iniciar-pago" class="btn-pagar">
                    Finalizar Compra (${{ "%.2f"|format(total) }})
                </button>

            {% else %}
                <p style="text-align: center; font-size: 1.2rem; padding: 50px;">
                    Tu carrito est√° vac√≠o. ¬°A√±ade algunas milanesas! üòã
                </p>
            {% endif %}
        </div>
    </div>

    <!-- ===== INICIO: MODAL DE PAGO (sin cambios) ===== -->
    <div id="modal-pago" class="modal-backdrop">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Procesar Pago</h2>
                <button class="btn-cerrar-modal" aria-label="Cerrar Modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="payment-form">
                    <form id="form-pago">
                        <div class="form-group">
                            <label for="card-number">N√∫mero de Tarjeta</label>
                            <input type="text" id="card-number" class="form-control" placeholder="XXXX XXXX XXXX XXXX" required>
                        </div>
                        <div class="form-group">
                            <label for="card-name">Nombre en la Tarjeta</label>
                            <input type="text" id="card-name" class="form-control" placeholder="Juan P√©rez" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="card-expiry">Vencimiento (MM/AA)</label>
                                <input type="text" id="card-expiry" class="form-control" placeholder="12/26" required>
                            </div>
                            <div class="form-group">
                                <label for="card-cvc">CVC</label>
                                <input type="text" id="card-cvc" class="form-control" placeholder="123" required>
                            </div>
                        </div>
                        
                        <button type="submit" id="btn-submit-pago" class="btn-pagar">
                            Pagar ${{ "%.2f"|format(total) }}
                        </button>
                    </form>
                </div>
                
                <div id="success-message" class="success-message">
                    ‚úÖ ¬°Pago procesado con √©xito! Redirigiendo...
                </div>
                
                <div id="error-message" class="error-message">
                    ‚ùå Error al procesar el pago. Por favor, intente de nuevo.
                </div>
            </div>
        </div>
    </div>
    <!-- ===== FIN: MODAL DE PAGO ===== -->


    <!-- ===== INICIO: SCRIPT DEL MODAL Y TEMA ===== -->
    <script src="{{ url_for('static', filename='js/carrito.js') }}"></script>
    </script>
    <!-- ===== FIN: SCRIPT DEL MODAL ===== -->
</body>
</html>
