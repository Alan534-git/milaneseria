<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda de Milanesas - Sabores Clásicos</title>
    <!-- Carga la fuente Inter de Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Importa el nuevo archivo base de estilos (incluye Font Awesome y dark mode) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    <!-- Font Awesome para el ícono de "sin refresco" y los botones de tema -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-store"></i> Tienda de Milanesas</h1>
            <div class="header-right">
                <!-- Botón de Claro/Oscuro -->
                <button id="theme-toggle" aria-label="Cambiar tema">
                    <i class="fas fa-sun"></i>
                    <i class="fas fa-moon"></i>
                </button>
                <!-- Botón de Carrito -->
                <a href="{{ url_for('carrito') }}" class="btn-carrito">
                    <i class="fas fa-shopping-cart"></i>
                    <!-- CAMBIO: Eliminadas las llaves alrededor del contador del carrito -->
                    <span id="cart-count" class="cart-badge">{{ carrito|length }}</span>
                </a>
            </div>
        </header>

        <div class="productos-container">
            {% for p in productos %}
                <div class="producto-card">
                    <!-- Imagen de la milanesa -->
                    <img src="{{ url_for('static', filename='img/' + p.imagen) }}" 
                         alt="Milanesa {{ p.nombre }}" 
                         class="producto-imagen"
                         onerror="this.onerror=null; this.src='https://placehold.co/250x180/d6451e/ffffff?text=Milanesa';">

                    <div class="producto-info">
                        <h2 class="producto-nombre">{{ p.nombre }}</h2>
                        <p class="precio-base">Precio Base: <span>${{ "%.2f"|format(p.precio) }}</span></p>

                        <!-- Opciones de Refresco -->
                        <div class="refresco-opciones">
                            <h4>Elige tu Refresco (Opcional):</h4>
                            <div class="refresco-buttons">
                                <button class="btn-refresco selected" data-refresco-id="0" data-price="0.00" aria-label="Sin Refresco">
                                    <i class="fas fa-ban"></i>
                                    <span class="tooltip-refresco">Sin Refresco: Gratis</span>
                                </button>
                                <button class="btn-refresco" data-refresco-id="1" data-price="1.50" aria-label="Refresco Coca-Cola">
                                    <img src="{{ url_for('static', filename='img/coca.webp') }}" alt="Coca-Cola" onerror="this.onerror=null; this.src='https://placehold.co/20x20/ef4444/ffffff?text=C';">
                                    <span class="tooltip-refresco">Coca-Cola: $1.50</span>
                                </button>
                                <button class="btn-refresco" data-refresco-id="2" data-price="1.75" aria-label="Refresco Pepsi">
                                    <img src="{{ url_for('static', filename='img/pepsi.webp') }}" alt="Pepsi" onerror="this.onerror=null; this.src='https://placehold.co/20x20/3b82f6/ffffff?text=P';">
                                    <span class="tooltip-refresco">Pepsi: $1.75</span>
                                </button>
                                <button class="btn-refresco" data-refresco-id="3" data-price="1.25" aria-label="Refresco Sprite">
                                    <img src="{{ url_for('static', filename='img/sprite.webp') }}" alt="Sprite" onerror="this.onerror=null; this.src='https://placehold.co/20x20/10b981/ffffff?text=S';">
                                    <span class="tooltip-refresco">Sprite: $1.25</span>
                                </button>
                                <button class="btn-refresco" data-refresco-id="4" data-price="1.60" aria-label="Refresco Fanta">
                                    <img src="{{ url_for('static', filename='img/fanta.webp') }}" alt="Fanta" onerror="this.onerror=null; this.src='https://placehold.co/20x20/fb923c/ffffff?text=F';">
                                    <span class="tooltip-refresco">Fanta: $1.60</span>
                                </button>
                                <button class="btn-refresco" data-refresco-id="5" data-price="1.00" aria-label="Refresco 7Up">
                                    <img src="{{ url_for('static', filename='img/7up.webp') }}" alt="7Up" onerror="this.onerror=null; this.src='https://placehold.co/20x20/6b7280/ffffff?text=7';">
                                    <span class="tooltip-refresco">7Up: $1.00</span>
                                </button>
                                <button class="btn-refresco" data-refresco-id="6" data-price="0.75" aria-label="Refresco Manaos">
                                    <img src="{{ url_for('static', filename='img/manaos.webp') }}" alt="Manaos" onerror="this.onerror=null; this.src='https://placehold.co/20x20/4f46e5/ffffff?text=M';">
                                    <span class="tooltip-refresco">Manaos: $0.75</span>
                                </button>
                            </div>
                        </div>

                        <a href="/agregar/{{ p.id }}" class="btn-agregar" data-product-id="{{ p.id }}" data-refresco-price="0">
                            <!-- CAMBIO: Eliminadas las llaves alrededor del precio inicial -->
                            ➕ Agregar al carrito ($<span class="initial-price">{{ "%.2f"|format(p.precio) }}</span>)
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <!-- Script principal de la lógica de la tienda y tema -->
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
</body>
</html>
